<section class="grid">
  <!-- Painel esquerdo -->
  <mat-card class="panel left">
    <h1>CALCULAR PACE</h1>

    <div class="hint">
      <mat-icon>timeline</mat-icon>
      <span>Tabela rápida de pace ↔ velocidade</span>
    </div>

    <!-- Tabela responsiva -->
    <div class="table list-mobile">
      <div class="row header">
        <div>Pace</div>
        <div>Velocidade média</div>
      </div>
      <div class="row" *ngFor="let r of quickRows">
        <div data-label="Pace">{{ r.pace }}</div>
        <div data-label="Velocidade">{{ r.speed }}</div>
      </div>
    </div>

    <mat-divider class="sep"></mat-divider>

    <div class="unit-switch">
      <span>Unidade:</span>
      <mat-button-toggle-group [(ngModel)]="unit" aria-label="Unidade">
        <mat-button-toggle value="km">Km</mat-button-toggle>
        <mat-button-toggle value="mi">Milhas</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </mat-card>

  <!-- Painel direito -->
  <mat-card class="panel right">
    <h2>Insira os valores</h2>

    <div class="mode-switch">
      <mat-button-toggle-group [(ngModel)]="mode" aria-label="Modo">
        <mat-button-toggle value="toPace">Distância + Tempo → Pace</mat-button-toggle>
        <mat-button-toggle value="toTime">Distância + Pace → Tempo</mat-button-toggle>
      </mat-button-toggle-group>
    </div>

    <!-- Distância + Tempo -> Pace -->
    <div class="form" *ngIf="mode === 'toPace'" [formGroup]="formToPace">
      <mat-form-field appearance="outline">
        <mat-label>Distância</mat-label>
        <input matInput #inputElement type="number" formControlName="distance" min="0.001" step="0.01">
        <span matSuffix>{{ unit }}</span>
      </mat-form-field>

      <div class="inline-3">
        <mat-form-field appearance="outline">
          <mat-label>Horas</mat-label>
          <input matInput #inputElement type="number" formControlName="hh" min="0">
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Minutos</mat-label>
          <input matInput #inputElement type="number" formControlName="mm" min="0" max="59">
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Segundos</mat-label>
          <input matInput #inputElement type="number" formControlName="ss" min="0" max="59">
        </mat-form-field>
      </div>

      <div class="actions">
        <button mat-stroked-button color="primary" (click)="calc()">Calcular</button>
      </div>
    </div>

    <!-- Distância + Pace -> Tempo -->
    <div class="form" *ngIf="mode === 'toTime'" [formGroup]="formToTime">
      <mat-form-field appearance="outline">
        <mat-label>Distância</mat-label>
        <input matInput #inputElement type="number" formControlName="distance" min="0.001" step="0.01">
        <span matSuffix>{{ unit }}</span>
      </mat-form-field>

      <div class="inline-2">
        <mat-form-field appearance="outline">
          <mat-label>Pace (min)</mat-label>
          <input matInput #inputElement type="number" formControlName="paceMin" min="0">
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Pace (seg)</mat-label>
          <input matInput #inputElement type="number" formControlName="paceSec" min="0" max="59">
          <span matSuffix>min/{{ unit }}</span>
        </mat-form-field>
      </div>

      <div class="actions">
        <button mat-stroked-button color="primary" (click)="calc()">Calcular</button>
      </div>
    </div>

    <!-- Resultado -->
    <div class="result">
      <div class="badge"><span>Pace</span><strong>{{ result.pace || '—' }}</strong></div>
      <div class="badge"><span>Velocidade</span><strong>{{ result.speed || '—' }}</strong></div>
      <div class="badge"><span>Tempo total</span><strong>{{ result.totalTime || '—' }}</strong></div>
    </div>
  </mat-card>
</section>

<!-- Explicação -->
<section class="explain">
  <h3>Como o pace é calculado?</h3>
  <p>O <strong>pace</strong> é o tempo gasto para percorrer uma unidade de distância.</p>
  <p class="formula"><code>pace = tempo total (s) ÷ distância</code> → em <em>segundos por {{ unit }}</em></p>
  <p>Para <strong>min:seg</strong>, converta os segundos em minutos e segundos. A <strong>velocidade média</strong> é:</p>
  <p class="formula"><code>velocidade = distância ÷ (tempo total / 3600)</code> → {{ unit }}/h</p>
</section>
